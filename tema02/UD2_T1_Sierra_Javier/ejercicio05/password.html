<!DOCTYPE html>
<html>
    <head>
        <title>EJERCICIO 05</title>
        <meta charset="UTF-8">
        <script>
            function password(){
                //recogemos el valor pasado por el boton de formulario
                var strContr = document.getElementById("contrasena").value;
                //creamos una cadena con mayusculas
                var mayus = "ABCDEFGHYJKLMNÑOPQRSTUVWXYZ";
                //creamos una cadena con minusculas
                var minus = "abcdefghijklmnñopqrstuvwxyz";
                //creamos una cadena con digitos
                var nums = "0123456789";
                //creamos una cadena con los caracteres especiales indicados
                var esp = "-_@#$%&";
                //booleanos inicializados a false. Si coinciden = true
                var longitud = false;
                var mayuscula = false;
                var minuscula = false;
                var caracEsp = false;
                var numeros = false;

                //comprobar longitud contraseña
                if(strContr.length > 7 && strContr.length<17){
                    longitud = true;
                }

                //comprobar mayusculas. Lo comparamos con la cadena de mayusculas
                //¿Coincide algun caracter entre ellas? mayusculas pasa a true
                for(var i = 0; i<=strContr.length-1;i++){
                    for(var j = 0; j<=mayus.length-1;j++){
                        if(strContr[i] === mayus[j]){
                            mayuscula = true;
                        }
                    }
                }

                //comprobar minusculas, mismo funcionamiento que el anterior, pero con minusculas
                for(var i = 0; i<=strContr.length-1;i++){
                    for(var j = 0; j<=minus.length-1;j++){
                        if(strContr[i] === minus[j]){
                            minuscula = true;
                        }
                    }
                }

                //comprobar digitos
                for(var i = 0; i<=strContr.length-1;i++){
                    for(var j = 0; j<=nums.length-1;j++){
                        if(strContr[i] === nums[j]){
                            numeros = true;
                        }
                    }
                }

                //comprobar caracteres especiales
                for(var i = 0; i<=strContr.length-1;i++){
                    for(var j = 0; j<=esp.length-1;j++){
                        if(strContr[i] === esp[j]){
                            caracEsp = true;
                        }
                    }
                }

                //si todas las variables están en true, quiere decir que la contraseña es segura
                if(mayuscula && caracEsp && minuscula && numeros && longitud){
                    alert ("CONTRASEÑA SEGURA!");
                }else{
                    //si todas las variables booleanas no son true, aquí te dice en que criterio(s) has fallado
                    if(!longitud){
                        alert("ERROR: La contraseña debe contener minimo 8 caracteres y máximo 16 caracteres");
                    }
                    if(!mayuscula){
                        alert("ERROR: La contraseña debe contener mínimo una letra MAYÚSCULA");
                    }
                    if(!minuscula){
                        alert("ERROR: La contraseña debe contener mínimo una letra MINÚSCULA");
                    }
                    if(!caracEsp){
                        alert("ERROR: La contraseña debe contener mínimo un CARACTER ESPECIAL (@-_#%&$)");
                    }
                    if(!numeros){
                        alert("ERROR: La contraseña debe contener mínimo un DÍGITO");
                    }
                }
            }
        </script>
    </head>
    <body>
        <h1>CONTRASEÑA SEGURA</h1>
        <form id="formulario" name="formContra">
            <label for="contrasena">Contraseña:</label><br/>
            <input type="text" id="contrasena" value=""><br/>
            <input type="button" id="boton1" value="Enviar" onclick="password()">
        </form>
    </body>
</html>